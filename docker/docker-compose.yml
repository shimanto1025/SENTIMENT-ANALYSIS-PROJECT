version: '3.8'

services:
  sentiment-app:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: sentiment-analysis-app
    ports:
      - "7860:7860"
    volumes:
      - ../src:/app/src
      - ./data:/app/data  # For persistent vector store
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    command: python src/app.py

  # Optional: Add Redis for caching if needed
  # redis:
  #   image: redis:alpine
  #   container_name: sentiment-redis
  #   ports:
  #     - "6379:6379"

  # Optional: Add monitoring with Prometheus/Grafana
  # prometheus:
  #   image: prom/prometheus:latest
  #   container_name: prometheus
  #   volumes:
  #     - ./prometheus.yml:/etc/prometheus/prometheus.yml
  #   ports:
  #     - "9090:9090"